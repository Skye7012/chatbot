import streamlit as st
from PIL import Image
import numpy as np

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
st.title("üé® AI-–•—É–¥–æ–∂–Ω–∏–∫: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Å—Ç–∏–ª–µ —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤")

# –í—ã–±–æ—Ä —Å—Ç–∏–ª—è
style = st.selectbox(
    "–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å —Ö—É–¥–æ–∂–Ω–∏–∫–∞:",
    ("–í–∞–Ω –ì–æ–≥", "–≠–¥–≤–∞—Ä–¥ –ú—É–Ω–∫", "–ü–∞–±–ª–æ –ü–∏–∫–∞—Å—Å–æ", "–ö–ª–æ–¥ –ú–æ–Ω–µ")
)

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
uploaded_file = st.file_uploader("–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ —Ñ–æ—Ç–æ:", type=["jpg", "png", "jpeg"])

if uploaded_file is not None:
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    image = Image.open(uploaded_file)
    st.image(image, caption="–í–∞—à–µ —Ñ–æ—Ç–æ", use_column_width=True)

    # –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    if st.button("–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —Å—Ç–∏–ª—å " + style):
        # –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ –º–æ–¥–µ–ª–∏ (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
        st.write("‚è≥ –ò–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞... (–º–æ–¥–µ–ª—å –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞)")

        # –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã: –ø—Ä–æ—Å—Ç–æ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ü–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
        inverted_image = Image.fromarray(255 - np.array(image))
        st.image(inverted_image, caption=f"–°—Ç–∏–ª—å: {style}", use_column_width=True)

    feedback = st.text_area("–í–∞—à–∏ –æ—Ç–∑—ã–≤—ã –æ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏")
    if st.button('–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤'):
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç–∑—ã–≤ –≤ —Ñ–∞–π–ª –∏–ª–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        with open('feedback.txt', 'a') as f:
            f.write(feedback + '\n')
        st.success('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤!')
